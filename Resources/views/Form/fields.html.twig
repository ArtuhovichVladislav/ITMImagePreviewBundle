{% block itm_image_preview_widget %}
    {% spaceless %}

        {% if form.parent.vars.value|itm_ipw_exists(form.vars.name) %}

            <link rel="stylesheet" href="{{ asset('bundles/itmimagepreview/css/style.css') }}"/>
            <link rel="stylesheet" href="{{ asset('bundles/itmimagepreview/css/cropper.css') }}"/>

            <script src="{{ asset('bundles/itmimagepreview/js/cropper.js') }}"></script>

            <div id="itm_ipw_original_wrapper_{{ form.vars.name }}">
                <img id="itm_ipw_original_{{ form.vars.name }}" class="itm_ipw_original" src="{{ form.parent.vars.value|itm_ipw_url(form.vars.name) }}"/>
            </div>
            <div class="itm_ipw_separator"></div>

            {% for filter in filters %}

                <div id="itm_ipw_preview_wrapper{{ filter.name }}" style="width: {{ filter.size[0] }}px; height: {{ filter.size[1] }}px; overflow: hidden; float: left; " class="itm_ipw_preview_wrapper" >
                    <img id="itm_ipw_preview_{{ filter.name }}" class="itm_ipw_preview" src="{{ form.parent.vars.value|itm_ipw_path(form.vars.name) | imagine_filter(filter.name) }}"/>
                </div>
                <script>
                    $(document).ready
                    (
                        function()
                        {
                            $('#itm_ipw_preview_{{ filter.name }}').click(function()
                            {
                                var width = {{ filter.size[0] }};
                                var height = {{ filter.size[1] }};

                            });
                        }
                    );
                </script>
            {% endfor %}

        {% endif %}

        {{ form_widget(form) }}
    {% endspaceless %}
{% endblock %}